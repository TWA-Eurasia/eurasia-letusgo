extends ./navBar.jade
block title
  title 商品详情页
block css
  script(src="/jspm_packages/system.js")
  script(src="/config.js")

  script.
    System.import('js/itemDetails')

block content
  .ui.centered.segment
    .ui.grid.centered
      .sixteen.wide.column
        .ui.large.breadcrumb
          a.section(href="/categoryView/" + "#{itemDetails.category.parent._id}") #{itemDetails.category.parent.name}
          i.right.chevron.icon.ider
          a.section(href="/subCategoryView/" + "#{itemDetails.category._id}") #{itemDetails.item.category.name}
          i.right.chevron.icon.ider
          .active.section #{itemDetails.item.name}

      .ui.grid.ten.wide.column
        .nine.wide.column
          .ui.fluid.card(style="height:400px; background:black;")
            - var imageUrl = itemDetails.item.image
            img.ui.image(src="/" + imageUrl onerror="this.src='/image/nopicture.jpg'" style="vertical-align:middle")

        .seven.wide.column
          h2.ui.floated.header.orange.backge #{itemDetails.item.name}
          table.ui.definition.table
            tbody
              tr
                td.five.wide.column 单价
                td
                  span#itemPrice #{itemDetails.item.specification[0].price}
                  span  元

              - var name = itemDetails.item.specification[0].name
              - var isDisplay = (name === '') ? 'none' : ''
              - var attributes = {'style': 'display: ' + isDisplay}
                tr&attributes(attributes)
                  td 规格
                  td
                    .ui.form
                      .inline.fields
                        - each detail in itemDetails.item.specification
                          -var price = detail.price
                          -var itemId = detail.specification
                          -var inventory = detail.inventory
                            .field
                              .ui.radio
                                input.specification(id = itemId, data-price = price, data-inventory = inventory, type="radio", name="specification", checked=isChecked)
                                label #{detail.name}
              tr
                td 数量
                td
                  i.minus.square.icon
                  input(type="text" value=1 id="numberInput" style="text-align:center; width:50%")
                  i.add.square.icon
                  .ui.negative.message#inputError(style = 'display: none') 您所填写的数量超过库存!
              tr
                td 库存
                td
                  span#inventory #{itemDetails.item.specification[0].inventory}
                  span  #{itemDetails.item.unit}

          button.ui.primary.button
            i.cart.in.icon
            span 添加到购物车
            i.right.chevron.icon

      .ui.grid.centered
        .ten.wide.column
          .ui.message
            .header 商品详情：
            p #{itemDetails.item.description}
